[gd_scene load_steps=34 format=3 uid="uid://c0si0b2v6041q"]

[ext_resource type="Script" uid="uid://dju6wah07bc6b" path="res://scene/main.gd" id="1_jcbur"]
[ext_resource type="Script" uid="uid://bcs0elgnr810r" path="res://scripts/game.gd" id="1_wp4xf"]
[ext_resource type="Script" uid="uid://tjm0npo5t022" path="res://scripts/hand.gd" id="2_wp4xf"]
[ext_resource type="PackedScene" uid="uid://ce00hqw03mxic" path="res://scene/card_target_selector/card_target_selector.tscn" id="3_p1hux"]
[ext_resource type="AudioStream" uid="uid://d4juqkl2us0gh" path="res://sound/Theme_song/Bg_themesong1.mp3" id="3_smf0o"]
[ext_resource type="PackedScene" uid="uid://bfmwk2xm77yow" path="res://player/player.tscn" id="4_b5f6u"]
[ext_resource type="Script" uid="uid://d0j2o37u8fvkw" path="res://monster/enemy_script/enemy_handler.gd" id="5_jcbur"]
[ext_resource type="Resource" uid="uid://qnmslf1h4v02" path="res://player/player.tres" id="5_tqoya"]
[ext_resource type="PackedScene" uid="uid://blbos0eexrqok" path="res://monster/monster1/monster1.tscn" id="6_of57s"]
[ext_resource type="Resource" uid="uid://bxbju4rqktbqx" path="res://monster/monster1/worm.tres" id="6_v2gmf"]
[ext_resource type="PackedScene" uid="uid://dfih0lou13t2e" path="res://scene/level1.tscn" id="8_of57s"]
[ext_resource type="Script" uid="uid://4rik44eyxdyu" path="res://scripts/battle_ui.gd" id="8_v2gmf"]
[ext_resource type="PackedScene" uid="uid://btumtdbsprloa" path="res://monster/monster2/monster2.tscn" id="9_0vlqb"]
[ext_resource type="Script" uid="uid://fbstc00eoqbf" path="res://player/player_handler.gd" id="9_hybxs"]
[ext_resource type="Script" uid="uid://c1vmfbxaq47mq" path="res://monster/monster2/monster_2.gd" id="10_gjnwh"]
[ext_resource type="Resource" uid="uid://dt038f73udmmr" path="res://monster/monster2/golem.tres" id="11_fdqew"]
[ext_resource type="PackedScene" uid="uid://6gig0v74mrns" path="res://monster/monster3/monster3.tscn" id="12_gtqqq"]
[ext_resource type="PackedScene" uid="uid://dsj2l2j31biep" path="res://ui/mana_ui.tscn" id="12_mswub"]
[ext_resource type="Script" uid="uid://d2ikn5o4mxxtg" path="res://monster/monster3/monster_3.gd" id="13_gn2wi"]
[ext_resource type="Resource" uid="uid://dli71attp0380" path="res://monster/monster3/monster_3.tres" id="14_gn2wi"]
[ext_resource type="PackedScene" uid="uid://yqepflqpt2tj" path="res://ui/tooltip.tscn" id="14_hybxs"]
[ext_resource type="PackedScene" uid="uid://j65r8cfcepr5" path="res://monster/monster4/monster4.tscn" id="15_oldxj"]
[ext_resource type="Theme" uid="uid://564kf8hrx27g" path="res://Themes&Styles/main_theme.tres" id="15_v2gmf"]
[ext_resource type="Script" uid="uid://cmpdfg823qda2" path="res://monster/monster4/monster_4.gd" id="16_4jm02"]
[ext_resource type="Script" uid="uid://chlac7yrr2han" path="res://scripts/ui_script/red_flash.gd" id="16_jcbur"]
[ext_resource type="Resource" uid="uid://mdqh3u56nf0d" path="res://monster/monster4/monster_4.tres" id="17_4jm02"]
[ext_resource type="PackedScene" uid="uid://bbtxauaj1ha2e" path="res://monster/boss/boss1.tscn" id="18_io27d"]
[ext_resource type="PackedScene" uid="uid://c3jd76vgrs4dp" path="res://ui/battle_over_panel.tscn" id="18_tv8i1"]
[ext_resource type="Script" uid="uid://ba1p7my7io665" path="res://monster/boss/boss_1.gd" id="19_fa8t4"]
[ext_resource type="Resource" uid="uid://bom705vv7k5rx" path="res://monster/boss/boss.tres" id="20_fa8t4"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wp4xf"]
size = Vector2(1600, 682)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_v2gmf"]
bg_color = Color(0, 0.709804, 0.960784, 1)
border_width_left = 8
border_width_top = 8
border_width_right = 8
border_width_bottom = 8
border_color = Color(0, 0.639216, 0.8, 1)
corner_radius_top_left = 20
corner_radius_top_right = 20
corner_radius_bottom_right = 20
corner_radius_bottom_left = 20

[sub_resource type="LabelSettings" id="LabelSettings_fa8t4"]
font_size = 20

[node name="main" type="Node2D"]
script = ExtResource("1_jcbur")
char_stats = ExtResource("5_tqoya")
music = ExtResource("3_smf0o")

[node name="Game" type="Node" parent="."]
script = ExtResource("1_wp4xf")

[node name="level1" parent="." instance=ExtResource("8_of57s")]
z_index = -2
texture_filter = 1
position = Vector2(700, 241)
scale = Vector2(1.71137, 1.71137)

[node name="carddropare" type="Area2D" parent="."]
collision_layer = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="carddropare"]
position = Vector2(800, 341)
shape = SubResource("RectangleShape2D_wp4xf")
debug_color = Color(0, 0.6, 0.701961, 0.364706)

[node name="EnemyHandler" type="Node2D" parent="."]
script = ExtResource("5_jcbur")

[node name="boss" parent="EnemyHandler" groups=["enemies"] instance=ExtResource("18_io27d")]
position = Vector2(497, 363)
scale = Vector2(3.815, 3.815)
collision_layer = 4
script = ExtResource("19_fa8t4")
stats = ExtResource("20_fa8t4")

[node name="golem" parent="EnemyHandler" groups=["enemies"] instance=ExtResource("9_0vlqb")]
position = Vector2(1036, 519)
scale = Vector2(2.55, 2.55)
collision_layer = 4
script = ExtResource("10_gjnwh")
stats = ExtResource("11_fdqew")

[node name="worm" parent="EnemyHandler" instance=ExtResource("6_of57s")]
position = Vector2(1312, 586)
scale = Vector2(1.815, 1.815)
stats = ExtResource("6_v2gmf")

[node name="monster3" parent="EnemyHandler" groups=["enemies"] instance=ExtResource("12_gtqqq")]
position = Vector2(814, 470)
scale = Vector2(2, 2)
collision_layer = 4
script = ExtResource("13_gn2wi")
stats = ExtResource("14_gn2wi")

[node name="monster4" parent="EnemyHandler" groups=["enemies"] instance=ExtResource("15_oldxj")]
position = Vector2(663, 424)
scale = Vector2(2, 2)
collision_layer = 4
script = ExtResource("16_4jm02")
stats = ExtResource("17_4jm02")

[node name="Player" parent="." instance=ExtResource("4_b5f6u")]
z_index = 1
position = Vector2(217, 549)
scale = Vector2(1.61602, 1.61602)
stats = ExtResource("5_tqoya")

[node name="CardTargetSelector" parent="." instance=ExtResource("3_p1hux")]

[node name="PlayerHandler" type="Node" parent="." node_paths=PackedStringArray("hand")]
script = ExtResource("9_hybxs")
hand = NodePath("../battleUI/hand")

[node name="battleUI" type="CanvasLayer" parent="." groups=["ui_layer"]]
script = ExtResource("8_v2gmf")

[node name="hand" type="HBoxContainer" parent="battleUI"]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -300.0
offset_top = -182.0
offset_right = 300.0
offset_bottom = 68.0
grow_horizontal = 2
grow_vertical = 0
scale = Vector2(0.713703, 0.713703)
size_flags_horizontal = 3
theme_override_constants/separation = 20
alignment = 1
script = ExtResource("2_wp4xf")

[node name="ManaUI" parent="battleUI" instance=ExtResource("12_mswub")]
texture_filter = 1
offset_left = 79.0
offset_top = -116.0
offset_right = 154.0
offset_bottom = -41.0
theme = null
theme_override_styles/panel = SubResource("StyleBoxFlat_v2gmf")
char_stats = ExtResource("5_tqoya")

[node name="Tooltip" parent="battleUI" instance=ExtResource("14_hybxs")]
offset_top = 28.0
offset_bottom = 248.0

[node name="EndTurnButton" type="Button" parent="battleUI"]
unique_name_in_owner = true
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -218.0
offset_top = -79.0
offset_right = -33.8101
offset_bottom = -28.055
grow_horizontal = 0
grow_vertical = 0
theme = ExtResource("15_v2gmf")
text = "End This Turn"

[node name="RedFlash" type="CanvasLayer" parent="."]
layer = 2
script = ExtResource("16_jcbur")

[node name="ColorRect" type="ColorRect" parent="RedFlash"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(1, 0, 0, 0)

[node name="Timer" type="Timer" parent="RedFlash"]
wait_time = 0.1
one_shot = true

[node name="BattleOverLayer" type="CanvasLayer" parent="."]
layer = 2

[node name="BattleOverPanel" parent="BattleOverLayer" instance=ExtResource("18_tv8i1")]
visible = false

[node name="tutorial" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="tutorial"]
offset_left = 169.0
offset_top = 806.0
offset_right = 480.0
offset_bottom = 834.0
text = "<- มานาของเรา จะหายไปเมื่อใช้การ์ด"
label_settings = SubResource("LabelSettings_fa8t4")

[node name="Label2" type="Label" parent="tutorial"]
offset_left = 314.0
offset_top = 721.0
offset_right = 735.0
offset_bottom = 780.0
text = "<- ทั้งตัวเราและ monster 
ต่างมีเกราะและพลังชีวิต"
label_settings = SubResource("LabelSettings_fa8t4")

[node name="Label3" type="Label" parent="tutorial"]
offset_left = 1111.0
offset_top = 419.0
offset_right = 1483.0
offset_bottom = 484.0
text = "<- สถานะว่า monster จะทำอะไรในตาถัดไป 
โดยจะมีทั้งโจมตีและป้องกัน"
label_settings = SubResource("LabelSettings_fa8t4")

[node name="Label4" type="Label" parent="tutorial"]
offset_left = 916.0
offset_top = 746.0
offset_right = 1326.0
offset_bottom = 811.0
text = "<- การ์ดแอีคชั่นของเรา เลือกได้ตามมานาที่จำกัด"
label_settings = SubResource("LabelSettings_fa8t4")

[node name="Label5" type="Label" parent="tutorial"]
offset_left = 1169.0
offset_top = 108.0
offset_right = 1579.0
offset_bottom = 173.0
text = "<- ความสามารถของการ์ด"
label_settings = SubResource("LabelSettings_fa8t4")

[node name="Label6" type="Label" parent="tutorial"]
offset_left = 1169.0
offset_top = 829.0
offset_right = 1377.0
offset_bottom = 869.0
text = "กดเพื่อจบรอบของเรา->"
label_settings = SubResource("LabelSettings_fa8t4")

[connection signal="area_entered" from="EnemyHandler/boss" to="EnemyHandler/boss" method="_on_area_entered"]
[connection signal="area_exited" from="EnemyHandler/boss" to="EnemyHandler/boss" method="_on_area_exited"]
[connection signal="area_entered" from="EnemyHandler/golem" to="EnemyHandler/golem" method="_on_area_entered"]
[connection signal="area_exited" from="EnemyHandler/golem" to="EnemyHandler/golem" method="_on_area_exited"]
[connection signal="area_entered" from="EnemyHandler/monster3" to="EnemyHandler/monster3" method="_on_area_entered"]
[connection signal="area_exited" from="EnemyHandler/monster3" to="EnemyHandler/monster3" method="_on_area_exited"]
[connection signal="area_entered" from="EnemyHandler/monster4" to="EnemyHandler/monster4" method="_on_area_entered"]
[connection signal="area_exited" from="EnemyHandler/monster4" to="EnemyHandler/monster4" method="_on_area_exited"]
